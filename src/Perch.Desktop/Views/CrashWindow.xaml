<ui:FluentWindow
    x:Class="Perch.Desktop.Views.CrashWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Perch - Unhandled Exception"
    Width="750" Height="600"
    MinWidth="500" MinHeight="400"
    WindowStartupLocation="CenterScreen"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica">

    <Grid Margin="24">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Image
            Grid.Column="0"
            Source="/Assets/wizard-error.png"
            Width="260" Height="260"
            VerticalAlignment="Top"
            Margin="0,40,24,0" />

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0,40,0,12">
                <TextBlock
                    Text="Something went wrong"
                    FontSize="22"
                    FontWeight="SemiBold" />
                <TextBlock
                    x:Name="ErrorMessageText"
                    FontSize="13"
                    Opacity="0.7"
                    TextWrapping="Wrap"
                    Margin="0,6,0,0" />
            </StackPanel>

            <TextBlock Grid.Row="1" Text="Stack trace" FontSize="12" Opacity="0.5" Margin="0,4,0,4" />

            <TextBox
                x:Name="ErrorDetailsBox"
                Grid.Row="2"
                IsReadOnly="True"
                TextWrapping="Wrap"
                AcceptsReturn="True"
                VerticalScrollBarVisibility="Auto"
                FontFamily="Cascadia Code,Consolas,Courier New"
                FontSize="12"
                Padding="12"
                BorderThickness="1"
                BorderBrush="{DynamicResource ControlElevationBorderBrush}" />

            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                <ui:Button
                    Content="Copy to clipboard"
                    Appearance="Secondary"
                    Click="CopyButton_Click"
                    Margin="0,0,8,0" />
                <ui:Button
                    Content="Close"
                    Appearance="Primary"
                    Click="CloseButton_Click" />
            </StackPanel>
        </Grid>
    </Grid>

</ui:FluentWindow>
